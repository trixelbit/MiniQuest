(()=>{"use strict";var e={177:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerMovement=void 0;const i=s(603);t.PlayerMovement=class{get Velocity(){return this._velocity.Copy()}constructor(e,t,s){this._velocity=i.Vector2.Zero(),this._input=i.Vector2.Zero(),this.DRAG_COEFFICIENT=.05,this._inputSystem=t,this._element=e,this._maxSpeed=s}Start(){}Update(){this._input=this.ProcessInput(),this.SetVelocity(this._input),this._velocity=i.Vector2.Lerp(this._velocity,i.Vector2.Zero(),this.DRAG_COEFFICIENT);const e=parseFloat(this._element.style.left)||0,t=parseFloat(this._element.style.top)||0,s=e+this._velocity.x*this._maxSpeed,n=t+this._velocity.y*this._maxSpeed;this._element.style.left=s+"px",this._element.style.top=n+"px"}SetVelocity(e){this._velocity=e,this._velocity.Scale(this._maxSpeed)}ProcessInput(){var e=0,t=0;return this._inputSystem.IsKeyDown("ArrowLeft")&&(e-=1),this._inputSystem.IsKeyDown("ArrowRight")&&(e+=1),this._inputSystem.IsKeyDown("ArrowUp")&&(t-=1),this._inputSystem.IsKeyDown("ArrowDown")&&(t+=1),i.Vector2.Normalized(new i.Vector2(e,t))}}},38:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Entity=void 0,t.Entity=class{constructor(e,t=[]){this._id=crypto.randomUUID(),this._element=document.createElement("img"),this._element.style.position="absolute",this._element.id=e+" - "+this._id,this._element.src="",document.body.appendChild(this._element),this._components=t}AddComponent(e){this._components.push(e)}Start(){for(const e of this._components)e.Start()}Update(){for(const e of this._components)e.Update()}}},983:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0;const i=s(177),n=s(38);class r extends n.Entity{constructor(e){super("Player"),this._state=o.Idle,this._direction=a.Down,this._spriteTable=["Images/idle_up.png","Images/idle_down.png","Images/idle_left.png","Images/idle_right.png","Images/run_up.gif","Images/run_down.gif","Images/run_left.gif","Images/run_right.gif"],this._element.src="Images/idle_up.png",this._movement=new i.PlayerMovement(this._element,e,2),this.AddComponent(this._movement)}Update(){super.Update(),this.UpdateSpriteState()}UpdateSpriteState(){var e=this._movement.Velocity;e.Magnitude()>0?this._state=o.Walking:this._state=o.Idle,e.x>0?this._direction=a.Right:e.x<0&&(this._direction=a.Left),e.y>0?this._direction=a.Down:e.y<0&&(this._direction=a.Up);var t=4*this._state+this._direction;this.SetSprite(this._spriteTable[t])}SetSprite(e){this._element.getAttribute("src")!==e&&this._element.setAttribute("src",e)}}var o,a;t.Player=r,function(e){e[e.Idle=0]="Idle",e[e.Walking=1]="Walking"}(o||(o={})),function(e){e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right"}(a||(a={}))},154:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InputSystem=void 0,t.InputSystem=class{constructor(){this._downKeys=new Map,this._pressedKeys=new Map,this._releasedKeys=new Map,document.addEventListener("DOMContentLoaded",(()=>{document.addEventListener("keydown",(e=>{this._downKeys.set(e.key,!0),this._pressedKeys.set(e.key,!0),this._releasedKeys.set(e.key,!1)})),document.addEventListener("keyup",(e=>{this._downKeys.set(e.key,!1),this._pressedKeys.set(e.key,!1),this._releasedKeys.set(e.key,!0)}))}))}IsKeyDown(e){if(!this._downKeys.has(e))return!1;const t=this._downKeys.get(e);return void 0!==t&&t}IsKeyPressed(e){if(!this._pressedKeys.has(e))return!1;const t=this._pressedKeys.get(e);return void 0!==t&&t}IsKeyReleased(e){if(!this._releasedKeys.has(e))return!1;const t=this._releasedKeys.get(e);return void 0!==t&&t}ResetReleasedKeys(){for(var e in this._releasedKeys)this._releasedKeys.set(e,!1)}}},912:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MathUtils=void 0,t.MathUtils=class{static Lerp(e,t,s){return e+(t-e)*s}}},603:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Vector2=void 0;const i=s(912);class n{constructor(e,t){this.x=e,this.y=t}Copy(){return new n(this.x,this.y)}Scale(e){this.x*=e,this.y*=e}Magnitude(){return n.Distance(n.Zero(),this)}static Distance(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}static Lerp(e,t,s){return new n(i.MathUtils.Lerp(e.x,t.x,s),i.MathUtils.Lerp(e.y,t.y,s))}static Zero(){return new n(0,0)}static Normalized(e){var t=e.Magnitude();return new n(e.x/t,e.y/t)}}t.Vector2=n},607:function(e,t,s){var i=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(n,r){function o(e){try{d(i.next(e))}catch(e){r(e)}}function a(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=s(154),r=s(983),o=new n.InputSystem;document.addEventListener("DOMContentLoaded",(()=>{const e=document.createElement("img");e.src="Images/run_right.gif",e.src="Images/run_left.gif",document.body.appendChild(e),function(e,t,s){i(this,void 0,void 0,(function*(){for(;;){e.Start(),yield new Promise((e=>setTimeout(e,10))),e.Update(),t.ResetReleasedKeys();var i="Images/run_right.gif";s.getAttribute("src")!==i&&(s.setAttribute("src",i),console.log(" New Src: "+s.src))}}))}(new r.Player(o),o,e)}))}},t={};!function s(i){var n=t[i];if(void 0!==n)return n.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,s),r.exports}(607)})();